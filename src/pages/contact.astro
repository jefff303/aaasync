---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE } from "../consts";
---

<!doctype html>
<html lang="fr" data-theme="light">
  <head>
    <BaseHead
      title={`Contact | ${SITE_TITLE}`}
      description="Contactez notre équipe pour discuter de votre projet ou pour toute question."
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <Header />

    <!-- Hero Section -->
    <section class="hero bg-gradient-to-r from-primary to-secondary text-primary-content py-16">
      <div class="hero-content text-center">
        <div class="max-w-md">
          <h1 class="text-4xl md:text-5xl font-bold mb-4">Contactez-nous</h1>
          <p class="text-xl opacity-90">
            Nous sommes là pour répondre à vos questions et vous aider à
            concrétiser vos projets
          </p>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section class="py-16 px-4">
      <div class="container mx-auto max-w-6xl">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
          <!-- Formulaire de contact -->
          <div class="card bg-base-100 shadow-lg">
            <div class="card-body">
              <h2 class="card-title text-2xl mb-6">
                Envoyez-nous un message
              </h2>

              <form id="contact-form" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div class="form-control w-full">
                    <label for="firstName" class="label">
                      <span class="label-text">Prénom</span>
                    </label>
                    <input
                      type="text"
                      id="firstName"
                      name="firstName"
                      class="input input-bordered w-full"
                      required
                    />
                  </div>
                  <div class="form-control w-full">
                    <label for="lastName" class="label">
                      <span class="label-text">Nom</span>
                    </label>
                    <input
                      type="text"
                      id="lastName"
                      name="lastName"
                      class="input input-bordered w-full"
                      required
                    />
                  </div>
                </div>

                <div class="form-control w-full">
                  <label for="email" class="label">
                    <span class="label-text">Email</span>
                  </label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    class="input input-bordered w-full"
                    required
                  />
                </div>

                <div class="form-control w-full">
                  <label for="subject" class="label">
                    <span class="label-text">Sujet</span>
                  </label>
                  <select
                    id="subject"
                    name="subject"
                    class="select select-bordered w-full"
                    required
                  >
                    <option value="" disabled selected>Choisissez un sujet</option>
                    <option value="devis">Demande de devis</option>
                    <option value="information">Demande d'information</option>
                    <option value="support">Support technique</option>
                    <option value="partenariat">Proposition de partenariat</option>
                    <option value="autre">Autre</option>
                  </select>
                </div>

                <div class="form-control w-full">
                  <label for="message" class="label">
                    <span class="label-text">Message</span>
                  </label>
                  <textarea
                    id="message"
                    name="message"
                    rows="5"
                    class="textarea textarea-bordered w-full"
                    required></textarea>
                </div>

                <div class="form-control">
                  <label class="label cursor-pointer justify-start gap-2">
                    <input
                      type="checkbox"
                      id="privacy"
                      name="privacy"
                      class="checkbox checkbox-primary"
                      required
                    />
                    <span class="label-text break-words whitespace-normal">
                      J'accepte que mes données soient traitées conformément à la 
                      <a href="#" class="link link-primary inline-block">politique de confidentialité</a>.
                    </span>
                  </label>
                </div>

                <div class="form-control mt-6">
                  <button
                    type="submit"
                    class="btn btn-primary w-full"
                  >
                    <span>Envoyer le message</span>
                    <i class="fas fa-paper-plane ml-2"></i>
                  </button>
                </div>
              </form>

              <div
                id="success-message"
                class="hidden mt-6 alert alert-success"
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Votre message a été envoyé avec succès. Nous vous répondrons dans les plus brefs délais.</span>
              </div>

              <div
                id="error-message"
                class="hidden mt-6 alert alert-error"
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Une erreur s'est produite lors de l'envoi du message. Veuillez réessayer plus tard.</span>
              </div>
            </div>
          </div>

          <!-- Informations de contact -->
          <div class="lg:pl-8">
            <h2 class="text-2xl font-bold text-base-content mb-6">
              Nos coordonnées
            </h2>

            <div class="space-y-8">
              <div class="flex items-start">
                <div class="avatar placeholder">
                  <div class="bg-primary/20 text-primary rounded-full w-12 h-12" style="display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-map-marker-alt text-xl"></i>
                  </div>
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-semibold">Adresse</h3>
                  <p class="text-base-content/70 mt-1">
                    123 Avenue des Développeurs<br />
                    75000 Paris, France
                  </p>
                </div>
              </div>

              <div class="flex items-start">
                <div class="avatar placeholder">
                  <div class="bg-primary/20 text-primary rounded-full w-12 h-12" style="display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-phone-alt text-xl"></i>
                  </div>
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-semibold">Téléphone</h3>
                  <p class="text-base-content/70 mt-1">
                    <a
                      href="tel:+33123456789"
                      class="link link-hover"
                      >+33 1 23 45 67 89</a
                    >
                  </p>
                </div>
              </div>

              <div class="flex items-start">
                <div class="avatar placeholder">
                  <div class="bg-primary/20 text-primary rounded-full w-12 h-12" style="display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-envelope text-xl"></i>
                  </div>
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-semibold">Email</h3>
                  <p class="text-base-content/70 mt-1">
                    <a
                      href="mailto:contact@votreentreprise.com"
                      class="link link-hover"
                      >contact@votreentreprise.com</a
                    >
                  </p>
                </div>
              </div>

              <div class="flex items-start">
                <div class="avatar placeholder">
                  <div class="bg-primary/20 text-primary rounded-full w-12 h-12" style="display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-clock text-xl"></i>
                  </div>
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-semibold">
                    Horaires d'ouverture
                  </h3>
                  <p class="text-base-content/70 mt-1">
                    Lundi - Vendredi: 9h00 - 18h00<br />
                    Samedi - Dimanche: Fermé
                  </p>
                </div>
              </div>
            </div>

            <!-- Carte -->
            <div class="mt-10">
              <h3 class="text-lg font-semibold mb-4">
                Nous trouver
              </h3>
              <div class="h-64 bg-base-200 rounded-lg overflow-hidden">
                <!-- Remplacez par votre iframe Google Maps -->
                <div
                  class="w-full h-full flex items-center justify-center bg-base-300"
                >
                  <p class="text-base-content/50">Carte Google Maps à intégrer ici</p>
                </div>
              </div>
            </div>

            <!-- Réseaux sociaux -->
            <div class="mt-10">
              <h3 class="text-lg font-semibold mb-4">
                Suivez-nous
              </h3>
              <div class="flex space-x-4">
                <a
                  href="#"
                  class="btn btn-circle btn-outline btn-primary"
                >
                  <i class="fab fa-facebook-f"></i>
                </a>
                <a
                  href="#"
                  class="btn btn-circle btn-outline btn-primary"
                >
                  <i class="fab fa-twitter"></i>
                </a>
                <a
                  href="#"
                  class="btn btn-circle btn-outline btn-primary"
                >
                  <i class="fab fa-linkedin-in"></i>
                </a>
                <a
                  href="#"
                  class="btn btn-circle btn-outline btn-primary"
                >
                  <i class="fab fa-instagram"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="py-16 px-4 bg-base-200">
      <div class="container mx-auto max-w-4xl">
        <h2 class="text-3xl font-bold text-center mb-12">
          Questions fréquentes
        </h2>

        <div class="space-y-6">
          <div class="collapse collapse-arrow bg-base-100 shadow-md">
            <input type="radio" name="faq-accordion" checked="checked" /> 
            <div class="collapse-title text-xl font-semibold">
              Quel est le délai de réponse à ma demande ?
            </div>
            <div class="collapse-content text-base-content/70"> 
              <p>Nous nous efforçons de répondre à toutes les demandes dans un
              délai de 24 à 48 heures ouvrables.</p>
            </div>
          </div>

          <div class="collapse collapse-arrow bg-base-100 shadow-md">
            <input type="radio" name="faq-accordion" /> 
            <div class="collapse-title text-xl font-semibold">
              Comment se déroule un projet avec votre entreprise ?
            </div>
            <div class="collapse-content text-base-content/70"> 
              <p>Après un premier contact, nous organisons une réunion de
              découverte pour comprendre vos besoins. Nous établissons ensuite
              un devis détaillé avant de commencer le développement selon une
              méthodologie agile.</p>
            </div>
          </div>

          <div class="collapse collapse-arrow bg-base-100 shadow-md">
            <input type="radio" name="faq-accordion" /> 
            <div class="collapse-title text-xl font-semibold">
              Proposez-vous un service de maintenance après la livraison ?
            </div>
            <div class="collapse-content text-base-content/70"> 
              <p>Oui, nous offrons différentes formules de maintenance et de
              support technique pour assurer le bon fonctionnement de votre
              solution sur le long terme.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <Footer />

    <script>
      import emailjs from "@emailjs/browser";

      // Initialise EmailJS avec votre User ID
      emailjs.init("gD7h8SDVuvocVCRXY"); // Remplacez par votre User ID EmailJS

      document
        .getElementById("contact-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          // Afficher l'état de chargement
          const submitButton = document.querySelector('button[type="submit"]');
          const originalButtonContent = submitButton.innerHTML;
          submitButton.disabled = true;
          submitButton.innerHTML =
            '<span class="loading loading-spinner loading-sm mr-2"></span> Envoi en cours...';

          // Envoyer l'e-mail avec EmailJS
          emailjs
            .sendForm("service_gmail", "template_contact_form", this)
            .then(
              function (response) {
                // Afficher le message de succès
                document
                  .getElementById("success-message")
                  .classList.remove("hidden");
                document.getElementById("contact-form").reset();

                // Cacher le message après 5 secondes
                setTimeout(() => {
                  document
                    .getElementById("success-message")
                    .classList.add("hidden");
                }, 5000);
              },
              function (error) {
                // Afficher le message d'erreur
                document
                  .getElementById("error-message")
                  .classList.remove("hidden");

                // Cacher le message après 5 secondes
                setTimeout(() => {
                  document
                    .getElementById("error-message")
                    .classList.add("hidden");
                }, 5000);
              }
            )
            .finally(() => {
              // Réinitialiser le bouton
              submitButton.disabled = false;
              submitButton.innerHTML = originalButtonContent;
            });
        });
    </script>
  </body>
</html>
